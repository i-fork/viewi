var HttpClient=function(){this.response=null,this.interceptors=[],this.options={};var t=this,e=function(t){return"object"==typeof t&&!Array.isArray(t)&&null!==t};this.request=function(e,n,i,r){if(void 0===i&&(i=null),this.setOptions(r),"undefined"!=typeof viewiScopeData){var s=e.toLowerCase()+"_"+n+"_"+JSON.stringify(i);if(s in viewiScopeData)return new OnReady(function(t,e){t(viewiScopeData[s]),delete viewiScopeData[s]})}var o=ajax.request(e,n,i,this.options);if(this.interceptors.length>0){for(var u=null,a=null,c=null,l=null,p=null,h={success:!1,content:null,canceled:!1,headers:{},status:0},f=function(t){c.after=t,o.then(function(e){h.success=!0,h.content=e,t(c.next)},function(e){h.content=e,t(c.next)})},v=this.interceptors.length-1;v>=0;v--){var d=this.interceptors[v],H=d[0][d[1]];a={response:h,handle:f,onHandle:H,httpClient:t,reject:p,after:function(){},next:function(){this.previousHandler?this.previousHandler.after(this.previousHandler.next):h.success?l(h.content):p(h.content)}},c||(c=a),a.next=a.next.bind(a),u&&(a.nextHandler=u,u.previousHandler=a,a.handle=function(t){return function(e){t.previousHandler.after=e,t.reject=t.previousHandler.reject,t.onHandle(t)}}(u)),u=a}return new OnReady(function(t,e){l=t,p=e,a.reject=e,a.onHandle(a)})}return o},this.get=function(e,n){var i=t.request("GET",e,null,n);return i},this.post=function(e,n,i){var r=t.request("POST",e,n,i);return r},this.put=function(e,n,i){var r=t.request("PUT",e,n,i);return r},this.delete=function(e,n,i){var r=t.request("DELETE",e,n,i);return r},this.with=function(t){var n=new HttpClient;for(var i in n.interceptors=this.interceptors.slice(),n.interceptors.push(t),n.options=Object.assign({},this.options),n.options)e(n.options[i])&&(n.options[i]=Object.assign({},n.options[i]));return n},this.setOptions=function(t){for(var e in t)this.options[e]="headers"===e?Object.assign(this.options[e]||{},t[e]):t[e]}};exports.HttpClient=HttpClient;