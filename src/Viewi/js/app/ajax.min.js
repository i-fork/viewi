(function(n,e){function t(n){var e=this;this.action=n,this.then=function(n,t){this.onOk=n,this.onError=t,this.action(function(n){e.onOk(n)},function(n){e.onError(n)})},this.catch=function(n){this.onError=n}}function r(n){return"Blob"in window&&n instanceof Blob}var i={request:function(n,e,i,o){return new t(function(t,s){var u=new XMLHttpRequest;if(u.onreadystatechange=function(){if(4===u.readyState){var n=u.status,e=u.getResponseHeader("Content-Type"),r=e&&0===e.indexOf("application/json"),i=u.responseText;r&&(i=JSON.parse(u.responseText)),0===n||n>=200&&n<400?t(i):s(i)}},u.open(n.toUpperCase(),e,!0),o&&o.headers)for(var a in o.headers)u.setRequestHeader(a,o.headers[a]);null!==i?u.send(r(i)?i:JSON.stringify(i)):u.send()})},get:function(n,e){return i.request("GET",n,null,e)},post:function(n,e,t){return i.request("POST",n,e,t)},put:function(n,e,t){return i.request("PUT",n,e,t)},delete:function(n,e,t){return i.request("DELETE",n,e,t)}};n.OnReady=t,n.ajax=i})(viewiExports,viewiBring);